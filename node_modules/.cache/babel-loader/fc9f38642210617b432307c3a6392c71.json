{"ast":null,"code":"import _asyncToGenerator from\"/home/ec2-user/ShoppingApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ec2-user/ShoppingApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/ec2-user/ShoppingApp/node_modules/@babel/runtime/regenerator/index.js\";import{useRef,useState,useEffect,useContext}from'react';import{useNavigate}from'react-router-dom';import axios from'./api/axios';import CatalogList from'./CatalogList';import Header from'./Header';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CATALOG_URL='/v1/catalog';var CATALOG_IMAGE_URL='/v1/catalog/add-image';var Catalog=function Catalog(){var userRef=useRef();var errRef=useRef();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),itemName=_useState4[0],setItemName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),description=_useState6[0],setDescription=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),amount=_useState8[0],setAmount=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),image=_useState10[0],setImage=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),pwd=_useState12[0],setPwd=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),errMsg=_useState14[0],setErrMsg=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),success=_useState16[0],setSuccess=_useState16[1];var navigate=useNavigate();useEffect(function(){userRef.current.focus();},[]);useEffect(function(){setErrMsg('');},[user,pwd]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var item,formData,response,_err$response,_err$response2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;item={\"itemName\":itemName,\"description\":description,\"amount\":amount};formData=new FormData();formData.append('item_photo',image);_context.next=7;return axios.post(CATALOG_URL,item,null);case 7:response=_context.sent;console.log(response.data);if(!(response.data==-1)){_context.next=16;break;}setErrMsg('Login Failed');setUser('');setPwd('');throw errMsg;case 16:setUser('');setPwd('');setSuccess(true);_context.next=21;return axios.put(\"\".concat(CATALOG_IMAGE_URL,\"/\").concat(response.data.id),formData);case 21:if(success){navigate('/catalog');}case 22:_context.next=28;break;case 24:_context.prev=24;_context.t0=_context[\"catch\"](1);if(!(_context.t0!==null&&_context.t0!==void 0&&_context.t0.response)){setErrMsg('No Server Response');}else if(((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.status)===400){setErrMsg('Missing Username or Password');}else if(((_err$response2=_context.t0.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401){setErrMsg('Unauthorized');}else{setErrMsg('Login Failed');}errRef.current.focus();case 28:case\"end\":return _context.stop();}}},_callee,null,[[1,24]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-12 d-flex justify-content-center aligin-item-center mt-2\",children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"p\",{ref:errRef,className:errMsg?'errmsg':'offscreen',\"aria-live\":\"assertive\",children:errMsg}),/*#__PURE__*/_jsx(\"h1\",{children:\"Add Item\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"itemName ,\",children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"itemName\",ref:userRef,autoComplete:\"off\",onChange:function onChange(e){return setItemName(e.target.value);},value:itemName,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description ,\",children:\"Description:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"description\",ref:userRef,autoComplete:\"off\",onChange:function onChange(e){return setDescription(e.target.value);},value:description,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount ,\",children:\"Amount:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"amount\",ref:userRef,autoComplete:\"off\",style:{width:'150px',height:'37px'},onChange:function onChange(e){return setAmount(e.target.value);},value:amount,min:0,required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"image ,\",children:\"Image:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"image\",ref:userRef,onChange:function onChange(e){return setImage(e.target.files[0]);},required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-primary\",children:\"Add Item\"})]})]})})]})});};export default Catalog;","map":{"version":3,"sources":["/home/ec2-user/ShoppingApp/src/Catalog.jsx"],"names":["useRef","useState","useEffect","useContext","useNavigate","axios","CatalogList","Header","CATALOG_URL","CATALOG_IMAGE_URL","Catalog","userRef","errRef","user","setUser","itemName","setItemName","description","setDescription","amount","setAmount","image","setImage","pwd","setPwd","errMsg","setErrMsg","success","setSuccess","navigate","current","focus","handleSubmit","e","preventDefault","item","formData","FormData","append","post","response","console","log","data","put","id","status","target","value","width","height","files"],"mappings":"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","sourcesContent":["import { useRef, useState, useEffect, useContext } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport axios from './api/axios';\nimport CatalogList from './CatalogList';\nimport Header from './Header';\nconst CATALOG_URL = '/v1/catalog';\nconst CATALOG_IMAGE_URL = '/v1/catalog/add-image';\n\nconst Catalog = () => {\n\tconst userRef = useRef();\n\tconst errRef = useRef();\n\n\tconst [user, setUser] = useState('');\n\tconst [itemName, setItemName] = useState('');\n\tconst [description, setDescription] = useState('');\n\tconst [amount, setAmount] = useState(0);\n\tconst [image, setImage] = useState();\n\tconst [pwd, setPwd] = useState('');\n\tconst [errMsg, setErrMsg] = useState('');\n\tconst [success, setSuccess] = useState(false);\n\tconst navigate = useNavigate();\n\n\tuseEffect(() => {\n\t\tuserRef.current.focus();\n\t}, []);\n\n\tuseEffect(() => {\n\t\tsetErrMsg('');\n\t}, [user, pwd]);\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\n\t\ttry {\n\t\t\tlet item = {\n\t\t\t\t\"itemName\": itemName,\n\t\t\t\t\"description\": description,\n\t\t\t\t\"amount\": amount\n\t\t\t}\n\t\t\tlet formData = new FormData()\n\t\t\tformData.append('item_photo', image)\n\t\t\tlet response = await axios.post(CATALOG_URL, item, null);\n\t\t\tconsole.log(response.data);\n\t\t\tif (response.data == -1) {\n\t\t\t\tsetErrMsg('Login Failed');\n\t\t\t\tsetUser('');\n\t\t\t\tsetPwd('');\n\t\t\t\tthrow errMsg;\n\t\t\t} else {\n\t\t\t\tsetUser('');\n\t\t\t\tsetPwd('');\n\t\t\t\tsetSuccess(true);\n\t\t\t\tawait axios.put(`${CATALOG_IMAGE_URL}/${response.data.id}`, formData);\n\t\t\t\tif (success) {\n\t\t\t\t\tnavigate('/catalog')\n\t\t\t\t}\n\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (!err?.response) {\n\t\t\t\tsetErrMsg('No Server Response');\n\t\t\t} else if (err.response?.status === 400) {\n\t\t\t\tsetErrMsg('Missing Username or Password');\n\t\t\t} else if (err.response?.status === 401) {\n\t\t\t\tsetErrMsg('Unauthorized');\n\t\t\t} else {\n\t\t\t\tsetErrMsg('Login Failed');\n\t\t\t}\n\t\t\terrRef.current.focus();\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"container-fluid\">\n\t\t\t<div className=\"row\">\n\t\t\t\t<Header />\n\t\t\t\t<div className=\"col-md-12 d-flex justify-content-center aligin-item-center mt-2\">\n\t\t\t\t\t<section>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\t\tref={errRef}\n\t\t\t\t\t\t\tclassName={errMsg ? 'errmsg' : 'offscreen'}\n\t\t\t\t\t\t\taria-live=\"assertive\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{errMsg}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<h1>Add Item</h1>\n\t\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t\t<label htmlFor=\"itemName ,\">Name:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tid=\"itemName\"\n\t\t\t\t\t\t\t\tref={userRef}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tonChange={(e) => setItemName(e.target.value)}\n\t\t\t\t\t\t\t\tvalue={itemName}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<label htmlFor=\"description ,\">Description:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tid=\"description\"\n\t\t\t\t\t\t\t\tref={userRef}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tonChange={(e) => setDescription(e.target.value)}\n\t\t\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<label htmlFor=\"amount ,\">Amount:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\t\tid=\"amount\"\n\t\t\t\t\t\t\t\tref={userRef}\n\t\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\t\tstyle={{ width: '150px', height: '37px' }}\n\t\t\t\t\t\t\t\tonChange={(e) => setAmount(e.target.value)}\n\t\t\t\t\t\t\t\tvalue={amount}\n\t\t\t\t\t\t\t\tmin={0}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<label htmlFor=\"image ,\">Image:</label>\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"file\"\n\t\t\t\t\t\t\t\tid=\"image\"\n\t\t\t\t\t\t\t\tref={userRef}\n\t\t\t\t\t\t\t\tonChange={(e) => setImage(e.target.files[0])}\n\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<button className='btn btn-outline-primary'>Add Item</button>\n\t\t\t\t\t\t</form>\n\t\t\t\t\t</section>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Catalog;\n"]},"metadata":{},"sourceType":"module"}