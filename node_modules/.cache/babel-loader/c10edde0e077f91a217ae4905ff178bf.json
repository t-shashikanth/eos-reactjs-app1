{"ast":null,"code":"import _asyncToGenerator from\"/home/ec2-user/ShoppingApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/ec2-user/ShoppingApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/home/ec2-user/ShoppingApp/node_modules/@babel/runtime/regenerator/index.js\";import{useRef,useState,useEffect}from'react';import Login from'./Login';import axios from'./api/axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var REGISTER_URL='/v1/user/register';var Register=function Register(){var userRef=useRef();var errRef=useRef();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),userFocus=_useState4[0],setUserFocus=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),pwd=_useState6[0],setPwd=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),pwdFocus=_useState8[0],setPwdFocus=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),emailFocus=_useState12[0],setEmailFocus=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),mobile=_useState14[0],setMobile=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),mobileFocus=_useState16[0],setMobileFocus=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),errMsg=_useState18[0],setErrMsg=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),success=_useState20[0],setSuccess=_useState20[1];useEffect(function(){userRef.current.focus();},[]);var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var userRq,response,_err$response,_err$response2;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;userRq={\"username\":user,\"password\":pwd,\"email\":email,\"mobile\":mobile};_context.next=5;return axios.post(REGISTER_URL,userRq,null);case 5:response=_context.sent;console.log(response.data);setUser('');setPwd('');setEmail('');setMobile('');setSuccess(true);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);if(!(_context.t0!==null&&_context.t0!==void 0&&_context.t0.response)){setErrMsg('No Server Response');}else if(((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.status)===400){setErrMsg('Missing Username or Password');}else if(((_err$response2=_context.t0.response)===null||_err$response2===void 0?void 0:_err$response2.status)===401){setErrMsg('Unauthorized');}else{setErrMsg('Login Failed');}errRef.current.focus();case 18:case\"end\":return _context.stop();}}},_callee,null,[[1,14]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(_Fragment,{children:success?/*#__PURE__*/_jsx(Login,{}):/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"p\",{ref:errRef,className:errMsg?'errmsg':'offscreen',\"aria-live\":\"assertive\",children:errMsg}),/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",ref:userRef,autoComplete:\"off\",onChange:function onChange(e){return setUser(e.target.value);},value:user,required:true,\"aria-describedby\":\"uidnote\",onFocus:function onFocus(){return setUserFocus(true);},onBlur:function onBlur(){return setUserFocus(false);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",onChange:function onChange(e){return setPwd(e.target.value);},value:pwd,required:true,\"aria-describedby\":\"pwdnote\",onFocus:function onFocus(){return setPwdFocus(true);},onBlur:function onBlur(){return setPwdFocus(false);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"email\",onChange:function onChange(e){return setEmail(e.target.value);},value:email,required:true,\"aria-describedby\":\"emailnote\",onFocus:function onFocus(){return setEmailFocus(true);},onBlur:function onBlur(){return setEmailFocus(false);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mobile\",children:\"Mobile:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"mobile\",onChange:function onChange(e){return setMobile(e.target.value);},value:mobile,required:true,\"aria-describedby\":\"mobilenote\",onFocus:function onFocus(){return setMobileFocus(true);},onBlur:function onBlur(){return setMobileFocus(false);}}),/*#__PURE__*/_jsx(\"button\",{children:\"Sign Up\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Already registered?\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:\"line\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"Sign In\"})})]})]})});};export default Register;","map":{"version":3,"sources":["/home/ec2-user/ShoppingApp/src/Register.jsx"],"names":["useRef","useState","useEffect","Login","axios","REGISTER_URL","Register","userRef","errRef","user","setUser","userFocus","setUserFocus","pwd","setPwd","pwdFocus","setPwdFocus","email","setEmail","emailFocus","setEmailFocus","mobile","setMobile","mobileFocus","setMobileFocus","errMsg","setErrMsg","success","setSuccess","current","focus","handleSubmit","e","preventDefault","userRq","post","response","console","log","data","status","target","value"],"mappings":"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","sourcesContent":["import { useRef, useState, useEffect } from 'react';\nimport Login from './Login';\nimport axios from './api/axios';\nconst REGISTER_URL = '/v1/user/register';\n\nconst Register = () => {\n\tconst userRef = useRef();\n\tconst errRef = useRef();\n\n\tconst [user, setUser] = useState('');\n\tconst [userFocus, setUserFocus] = useState(false);\n\n\tconst [pwd, setPwd] = useState('');\n\tconst [pwdFocus, setPwdFocus] = useState(false);\n\n\tconst [email, setEmail] = useState('');\n\tconst [emailFocus, setEmailFocus] = useState(false);\n\n\tconst [mobile, setMobile] = useState('');\n\tconst [mobileFocus, setMobileFocus] = useState(false);\n\n\tconst [errMsg, setErrMsg] = useState('');\n\tconst [success, setSuccess] = useState(false);\n\n\tuseEffect(() => {\n\t\tuserRef.current.focus();\n\t}, []);\n\n\tconst handleSubmit = async (e) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tlet userRq = {\n\t\t\t\t\"username\": user,\n\t\t\t\t\"password\": pwd,\n\t\t\t\t\"email\": email,\n\t\t\t\t\"mobile\": mobile\n\t\t\t}\n\t\t\tlet response = await axios.post(REGISTER_URL, userRq, null);\n\t\t\tconsole.log(response.data);\n\t\t\t\tsetUser('');\n\t\t\t\tsetPwd('');\n\t\t\t\tsetEmail('');\n\t\t\t\tsetMobile('');\n\t\t\t\tsetSuccess(true);\n\t\t} catch (err) {\n\t\t\tif (!err?.response) {\n\t\t\t\tsetErrMsg('No Server Response');\n\t\t\t} else if (err.response?.status === 400) {\n\t\t\t\tsetErrMsg('Missing Username or Password');\n\t\t\t} else if (err.response?.status === 401) {\n\t\t\t\tsetErrMsg('Unauthorized');\n\t\t\t} else {\n\t\t\t\tsetErrMsg('Login Failed');\n\t\t\t}\n\t\t\terrRef.current.focus();\n\t\t}\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{success ? (\n\t\t\t\t<Login />\n\t\t\t) : (\n\t\t\t\t<section >\n\t\t\t\t\t<p\n\t\t\t\t\t\tref={errRef}\n\t\t\t\t\t\tclassName={errMsg ? 'errmsg' : 'offscreen'}\n\t\t\t\t\t\taria-live=\"assertive\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{errMsg}\n\t\t\t\t\t</p>\n\t\t\t\t\t<h1>Register</h1>\n\t\t\t\t\t<form onSubmit={handleSubmit}>\n\t\t\t\t\t\t<label htmlFor=\"username\">\n\t\t\t\t\t\t\tUsername:\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tid=\"username\"\n\t\t\t\t\t\t\tref={userRef}\n\t\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\t\tonChange={(e) => setUser(e.target.value)}\n\t\t\t\t\t\t\tvalue={user}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\taria-describedby=\"uidnote\"\n\t\t\t\t\t\t\tonFocus={() => setUserFocus(true)}\n\t\t\t\t\t\t\tonBlur={() => setUserFocus(false)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<label htmlFor=\"password\">\n\t\t\t\t\t\t\tPassword:\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"password\"\n\t\t\t\t\t\t\tid=\"password\"\n\t\t\t\t\t\t\tonChange={(e) => setPwd(e.target.value)}\n\t\t\t\t\t\t\tvalue={pwd}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\taria-describedby=\"pwdnote\"\n\t\t\t\t\t\t\tonFocus={() => setPwdFocus(true)}\n\t\t\t\t\t\t\tonBlur={() => setPwdFocus(false)}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<label htmlFor=\"email\">\n\t\t\t\t\t\t\tEmail:\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tid=\"email\"\n\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\n\t\t\t\t\t\t\tvalue={email}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\taria-describedby=\"emailnote\"\n\t\t\t\t\t\t\tonFocus={() => setEmailFocus(true)}\n\t\t\t\t\t\t\tonBlur={() => setEmailFocus(false)}\n\t\t\t\t\t\t/>\n\n\n\t\t\t\t\t\t<label htmlFor=\"mobile\">\n\t\t\t\t\t\t\tMobile:\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tid=\"mobile\"\n\t\t\t\t\t\t\tonChange={(e) => setMobile(e.target.value)}\n\t\t\t\t\t\t\tvalue={mobile}\n\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\taria-describedby=\"mobilenote\"\n\t\t\t\t\t\t\tonFocus={() => setMobileFocus(true)}\n\t\t\t\t\t\t\tonBlur={() => setMobileFocus(false)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button>\n\t\t\t\t\t\t\tSign Up\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</form>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tAlready registered?\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<span className=\"line\">\n\t\t\t\t\t\t\t<a href=\"/login\">Sign In</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</p>\n\t\t\t\t</section>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}